Table establishments as e{
  establishment varchar(20) [pk]
  created_at date
  updated_at date
}

Table years as y{
    year int2 [pk]
    created_at date
    updated_at date
}

Table cycles as cy{
  cycle varchar(20) [pk]
}

table classes_types as ct{
  id int [pk, increment]
  name varchar(20) [not null]
  cycle int [ref: > cy.cycle]
}

// this table isn't really a bridge table
Table establishment_classes as x{
  id int [pk]
  class_type_id int [ref: > ct.id]
  establishment int [ref: > e.establishment]
}

Table classes as cc{
  id int [pk]
  establishment_class_id int [ref: > x.id]
  year int [ref: > y.year]
  active boolean
  capacity int2
}

Table students as s {
  id int [pk, increment]
  created_at date
  updated_at date
  fname varchar(50) [not null]
  lname varchar(50) [not null]
  bday date [not null]
  bplace varchar(20) [not null]
  ar_fname varchar(50) [not null]
  ar_lname varchar(50) [not null]
}

Table studies_in as in{
  student_id int [ref: > s.id]
  class_id int [ref: > cc.id]
  sub_at date
  sub_modified_at date
  accepted boolean
  paid boolean
}


table parents as p{
  id int [pk]
  fname varchar(40) [not null]
  lname varchar(40) [not null]
  ar_fname varchar(40)
  ar_lname varchar(40)
  phone varchar(14) [not null]
  email varchar(72)
  address varchar(120)
  profession varchar(30) [not null]
}

// Bridge
Table student_parent{
  parent_id int [pk, ref: > p.id]
  student_id int [pk, ref: > s.id]
  relationship varchar(20)
}
